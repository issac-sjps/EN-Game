<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èªè­˜å®¶åº­æˆå“¡éŠæˆ²</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .bounce {
            animation: bounce 0.6s ease-in-out;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-100 via-purple-50 to-blue-100 min-h-screen font-sans">
    <div id="app" class="container mx-auto px-4 py-8">
        <!-- ä¸»é¸å–® -->
        <div id="mainMenu" class="text-center fade-in">
            <h1 class="text-5xl font-bold text-purple-800 mb-8 drop-shadow-lg">ğŸ  èªè­˜å®¶åº­æˆå“¡éŠæˆ² ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</h1>
            <div class="space-y-6">
                <button onclick="startGame()" class="bg-gradient-to-r from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 text-white font-bold py-4 px-8 rounded-full text-xl shadow-lg transform hover:scale-105 transition-all duration-200">
                    ğŸ® é–‹å§‹éŠæˆ²
                </button>
                <button onclick="showTeacherLogin()" class="bg-gradient-to-r from-orange-400 to-orange-600 hover:from-orange-500 hover:to-orange-700 text-white font-bold py-4 px-8 rounded-full text-xl shadow-lg transform hover:scale-105 transition-all duration-200">
                    ğŸ‘©â€ğŸ« è€å¸«æ•™å­¸å€
                </button>
            </div>
        </div>

        <!-- è€å¸«ç™»å…¥ -->
        <div id="teacherLogin" class="hidden text-center fade-in">
            <h2 class="text-3xl font-bold text-purple-800 mb-8">ğŸ‘©â€ğŸ« è€å¸«æ•™å­¸å€ç™»å…¥</h2>
            <div class="bg-white rounded-lg shadow-xl p-8 max-w-md mx-auto">
                <label for="password" class="block text-lg font-semibold text-gray-700 mb-4">è«‹è¼¸å…¥å¯†ç¢¼ï¼š</label>
                <input type="password" id="password" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-center text-xl mb-6" placeholder="è¼¸å…¥å¯†ç¢¼">
                <div class="space-y-4">
                    <button onclick="checkPassword()" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg">
                        ğŸ”“ ç™»å…¥
                    </button>
                    <button onclick="backToMenu()" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg">
                        â† è¿”å›ä¸»é¸å–®
                    </button>
                </div>
            </div>
        </div>

        <!-- è€å¸«æ•™å­¸å€ -->
        <div id="teacherArea" class="hidden fade-in">
            <h2 class="text-3xl font-bold text-purple-800 mb-8 text-center">ğŸ‘©â€ğŸ« è€å¸«æ•™å­¸å€</h2>
            
            <!-- çµ±è¨ˆå’Œå»ºè­°å€åŸŸ -->
            <div class="bg-white rounded-lg shadow-xl p-6 mb-8">
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ“Š å­¸ç¿’çµ±è¨ˆ</h3>
                        <div class="space-y-3">
                            <div class="bg-green-100 p-3 rounded-lg">
                                <span class="font-semibold">ç¸½ç­”é¡Œæ•¸ï¼š</span><span id="totalAnswers">0</span>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-lg">
                                <span class="font-semibold">æ­£ç¢ºç‡ï¼š</span><span id="accuracy">0%</span>
                            </div>
                            <div class="bg-yellow-100 p-3 rounded-lg">
                                <span class="font-semibold">æœ€é«˜åˆ†æ•¸ï¼š</span><span id="highScore">0</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ¯ æ•™å­¸å»ºè­°</h3>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <ul class="space-y-2 text-sm">
                                <li>â€¢ é¼“å‹µå­¸ç”Ÿå¤šç·´ç¿’è©åº«å­¸ç¿’</li>
                                <li>â€¢ å¯ä»¥æ­é…å®¶åº­ç…§ç‰‡é€²è¡Œæ•™å­¸</li>
                                <li>â€¢ å»ºè­°æ¯æ—¥ç·´ç¿’10-15åˆ†é˜</li>
                                <li>â€¢ å¯ä»¥è§’è‰²æ‰®æ¼”å¢åŠ è¶£å‘³æ€§</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è©åº«å­¸ç¿’å€åŸŸ -->
            <div class="bg-white rounded-lg shadow-xl p-6 mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">ğŸ“š å®¶åº­æˆå“¡è©åº«</h3>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg shadow-md p-4 text-center hover:shadow-lg transition-shadow">
                        <div class="text-4xl mb-2">ğŸ‘¨</div>
                        <h4 class="text-lg font-bold text-gray-800">Father</h4>
                        <p class="text-purple-700 font-semibold text-base">çˆ¸çˆ¸</p>
                        <p class="text-gray-600 text-sm mt-1">Dad, the head of family</p>
                        <button onclick="pronounceWord('Father')" class="mt-3 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full text-sm shadow-lg transform hover:scale-105 transition-all duration-200">
                            ğŸ”Š ç™¼éŸ³
                        </button>
                    </div>
                    <div class="bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg shadow-md p-4 text-center hover:shadow-lg transition-shadow">
                        <div class="text-4xl mb-2">ğŸ‘©</div>
                        <h4 class="text-lg font-bold text-gray-800">Mother</h4>
                        <p class="text-purple-700 font-semibold text-base">åª½åª½</p>
                        <p class="text-gray-600 text-sm mt-1">Mom, gives love and care</p>
                        <button onclick="pronounceWord('Mother')" class="mt-3 bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-full text-sm shadow-lg transform hover:scale-105 transition-all duration-200">
                            ğŸ”Š ç™¼éŸ³
                        </button>
                    </div>
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg shadow-md p-4 text-center hover:shadow-lg transition-shadow">
                        <div class="text-4xl mb-2">ğŸ‘¦</div>
                        <h4 class="text-lg font-bold text-gray-800">Brother</h4>
                        <p class="text-purple-700 font-semibold text-base">å“¥å“¥</p>
                        <p class="text-gray-600 text-sm mt-1">Older brother</p>
                        <button onclick="pronounceWord('Brother')" class="mt-3 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full text-sm shadow-lg transform hover:scale-105 transition-all duration-200">
                            ğŸ”Š ç™¼éŸ³
                        </button>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg shadow-md p-4 text-center hover:shadow-lg transition-shadow">
                        <div class="text-4xl mb-2">ğŸ‘§</div>
                        <h4 class="text-lg font-bold text-gray-800">Sister</h4>
                        <p class="text-purple-700 font-semibold text-base">å§å§</p>
                        <p class="text-gray-600 text-sm mt-1">Older sister</p>
                        <button onclick="pronounceWord('Sister')" class="mt-3 bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-full text-sm shadow-lg transform hover:scale-105 transition-all duration-200">
                            ğŸ”Š ç™¼éŸ³
                        </button>
                    </div>
                    <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg shadow-md p-4 text-center hover:shadow-lg transition-shadow">
                        <div class="text-4xl mb-2">ğŸ‘¶</div>
                        <h4 class="text-lg font-bold text-gray-800">Little Brother</h4>
                        <p class="text-purple-700 font-semibold text-base">å¼Ÿå¼Ÿ</p>
                        <p class="text-gray-600 text-sm mt-1">Younger brother</p>
                        <button onclick="pronounceWord('Little Brother')" class="mt-3 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-full text-sm shadow-lg transform hover:scale-105 transition-all duration-200">
                            ğŸ”Š ç™¼éŸ³
                        </button>
                    </div>
                    <div class="bg-gradient-to-br from-red-50 to-red-100 rounded-lg shadow-md p-4 text-center hover:shadow-lg transition-shadow">
                        <div class="text-4xl mb-2">ğŸ‘§</div>
                        <h4 class="text-lg font-bold text-gray-800">Little Sister</h4>
                        <p class="text-purple-700 font-semibold text-base">å¦¹å¦¹</p>
                        <p class="text-gray-600 text-sm mt-1">Younger sister</p>
                        <button onclick="pronounceWord('Little Sister')" class="mt-3 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-full text-sm shadow-lg transform hover:scale-105 transition-all duration-200">
                            ğŸ”Š ç™¼éŸ³
                        </button>
                    </div>
                    <div class="bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-lg shadow-md p-4 text-center hover:shadow-lg transition-shadow">
                        <div class="text-4xl mb-2">ğŸ‘´</div>
                        <h4 class="text-lg font-bold text-gray-800">Grandfather</h4>
                        <p class="text-purple-700 font-semibold text-base">çˆºçˆº</p>
                        <p class="text-gray-600 text-sm mt-1">Father's father</p>
                        <button onclick="pronounceWord('Grandfather')" class="mt-3 bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-full text-sm shadow-lg transform hover:scale-105 transition-all duration-200">
                            ğŸ”Š ç™¼éŸ³
                        </button>
                    </div>
                    <div class="bg-gradient-to-br from-teal-50 to-teal-100 rounded-lg shadow-md p-4 text-center hover:shadow-lg transition-shadow">
                        <div class="text-4xl mb-2">ğŸ‘µ</div>
                        <h4 class="text-lg font-bold text-gray-800">Grandmother</h4>
                        <p class="text-purple-700 font-semibold text-base">å¥¶å¥¶</p>
                        <p class="text-gray-600 text-sm mt-1">Father's mother</p>
                        <button onclick="pronounceWord('Grandmother')" class="mt-3 bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-full text-sm shadow-lg transform hover:scale-105 transition-all duration-200">
                            ğŸ”Š ç™¼éŸ³
                        </button>
                    </div>
                    <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg shadow-md p-4 text-center hover:shadow-lg transition-shadow">
                        <div class="text-4xl mb-2">ğŸ‘¨</div>
                        <h4 class="text-lg font-bold text-gray-800">Uncle</h4>
                        <p class="text-purple-700 font-semibold text-base">å”å”</p>
                        <p class="text-gray-600 text-sm mt-1">Father or mother's brother</p>
                        <button onclick="pronounceWord('Uncle')" class="mt-3 bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-full text-sm shadow-lg transform hover:scale-105 transition-all duration-200">
                            ğŸ”Š ç™¼éŸ³
                        </button>
                    </div>
                    <div class="bg-gradient-to-br from-cyan-50 to-cyan-100 rounded-lg shadow-md p-4 text-center hover:shadow-lg transition-shadow">
                        <div class="text-4xl mb-2">ğŸ‘©</div>
                        <h4 class="text-lg font-bold text-gray-800">Aunt</h4>
                        <p class="text-purple-700 font-semibold text-base">é˜¿å§¨</p>
                        <p class="text-gray-600 text-sm mt-1">Father or mother's sister</p>
                        <button onclick="pronounceWord('Aunt')" class="mt-3 bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-2 px-4 rounded-full text-sm shadow-lg transform hover:scale-105 transition-all duration-200">
                            ğŸ”Š ç™¼éŸ³
                        </button>
                    </div>
                </div>
            </div>

            <div class="text-center">
                <button onclick="backToMenu()" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg">
                    â† è¿”å›ä¸»é¸å–®
                </button>
            </div>
        </div>



        <!-- éŠæˆ²å€åŸŸ -->
        <div id="gameArea" class="hidden fade-in">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-purple-800 mb-4">ğŸ® èªè­˜å®¶åº­æˆå“¡éŠæˆ²</h2>
                <div class="bg-white rounded-lg shadow-lg p-4 inline-block">
                    <span class="text-xl font-bold">åˆ†æ•¸: <span id="score" class="text-green-600">0</span></span>
                    <span class="mx-4">|</span>
                    <span class="text-xl font-bold">é¡Œç›®: <span id="questionNumber">1</span>/20</span>
                    <span class="mx-4">|</span>
                    <span class="text-xl font-bold">ç­”å°ç‡: <span id="currentAccuracy" class="text-blue-600">0%</span></span>
                </div>
            </div>

            <div id="questionCard" class="bg-white rounded-lg shadow-xl p-8 max-w-2xl mx-auto">
                <div class="text-center mb-8">
                    <div id="questionEmoji" class="text-8xl mb-4">ğŸ‘¨</div>
                    <div class="flex items-center justify-center gap-4 mb-6">
                        <h3 id="questionText" class="text-2xl font-bold text-gray-800">é€™æ˜¯èª°ï¼Ÿ</h3>
                        <button id="questionPronounceBtn" onclick="pronounceQuestion()" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-full text-sm shadow-lg transform hover:scale-105 transition-all duration-200">
                            ğŸ”Š ç™¼éŸ³
                        </button>
                    </div>
                </div>
                
                <div id="options" class="grid grid-cols-1 gap-4">
                    <!-- é¸é …æœƒå‹•æ…‹ç”Ÿæˆ -->
                </div>
                
                <div id="feedback" class="hidden mt-6 p-4 rounded-lg text-center">
                    <p id="feedbackText" class="text-xl font-bold"></p>
                </div>
            </div>

            <div class="text-center mt-8">
                <button onclick="backToMenu()" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg">
                    â† è¿”å›ä¸»é¸å–®
                </button>
            </div>
        </div>

        <!-- éŠæˆ²çµæŸ -->
        <div id="gameEnd" class="hidden text-center fade-in">
            <h2 class="text-4xl font-bold text-purple-800 mb-8">ğŸ‰ éŠæˆ²çµæŸï¼</h2>
            <div class="bg-white rounded-lg shadow-xl p-8 max-w-md mx-auto">
                <div class="text-6xl mb-4">ğŸ†</div>
                <h3 class="text-2xl font-bold text-gray-800 mb-4">ä½ çš„åˆ†æ•¸</h3>
                <div class="text-4xl font-bold text-green-600 mb-6" id="finalScore">0</div>
                <div class="text-lg text-gray-600 mb-6" id="finalMessage">å¤ªæ£’äº†ï¼</div>
                <div class="space-y-4">
                    <button onclick="startGame()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg">
                        ğŸ”„ å†ç©ä¸€æ¬¡
                    </button>
                    <button onclick="backToMenu()" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg">
                        â† è¿”å›ä¸»é¸å–®
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // éŠæˆ²æ•¸æ“š
        const familyMembers = [
            { emoji: 'ğŸ‘¨', name: 'Father', description: 'Dad, the head of family' },
            { emoji: 'ğŸ‘©', name: 'Mother', description: 'Mom, gives love and care' },
            { emoji: 'ğŸ‘¦', name: 'Brother', description: 'Older brother' },
            { emoji: 'ğŸ‘§', name: 'Sister', description: 'Older sister' },
            { emoji: 'ğŸ‘¶', name: 'Little Brother', description: 'Younger brother' },
            { emoji: 'ğŸ‘§', name: 'Little Sister', description: 'Younger sister' },
            { emoji: 'ğŸ‘´', name: 'Grandfather', description: 'Father\'s father' },
            { emoji: 'ğŸ‘µ', name: 'Grandmother', description: 'Father\'s mother' },
            { emoji: 'ğŸ‘¨', name: 'Uncle', description: 'Father or mother\'s brother' },
            { emoji: 'ğŸ‘©', name: 'Aunt', description: 'Father or mother\'s sister' }
        ];

        // 20å€‹é¡Œç›®
        const questions = [
            { emoji: 'ğŸ‘¨', correct: 'Father', options: ['Father', 'Brother', 'Grandfather', 'Uncle'] },
            { emoji: 'ğŸ‘©', correct: 'Mother', options: ['Mother', 'Sister', 'Grandmother', 'Aunt'] },
            { emoji: 'ğŸ‘¦', correct: 'Brother', options: ['Brother', 'Little Brother', 'Father', 'Uncle'] },
            { emoji: 'ğŸ‘§', correct: 'Sister', options: ['Sister', 'Little Sister', 'Mother', 'Aunt'] },
            { emoji: 'ğŸ‘¶', correct: 'Little Brother', options: ['Little Brother', 'Brother', 'Father', 'Uncle'] },
            { emoji: 'ğŸ‘§', correct: 'Little Sister', options: ['Little Sister', 'Sister', 'Mother', 'Aunt'] },
            { emoji: 'ğŸ‘´', correct: 'Grandfather', options: ['Grandfather', 'Uncle', 'Father', 'Brother'] },
            { emoji: 'ğŸ‘µ', correct: 'Grandmother', options: ['Grandmother', 'Aunt', 'Mother', 'Sister'] },
            { emoji: 'ğŸ‘¨', correct: 'Uncle', options: ['Uncle', 'Father', 'Grandfather', 'Brother'] },
            { emoji: 'ğŸ‘©', correct: 'Aunt', options: ['Aunt', 'Mother', 'Grandmother', 'Sister'] },
            { emoji: 'ğŸ‘¨', correct: 'Father', options: ['Father', 'Uncle', 'Grandfather', 'Brother'] },
            { emoji: 'ğŸ‘©', correct: 'Mother', options: ['Mother', 'Aunt', 'Grandmother', 'Sister'] },
            { emoji: 'ğŸ‘¦', correct: 'Brother', options: ['Brother', 'Little Brother', 'Father', 'Uncle'] },
            { emoji: 'ğŸ‘§', correct: 'Sister', options: ['Sister', 'Little Sister', 'Mother', 'Aunt'] },
            { emoji: 'ğŸ‘¶', correct: 'Little Brother', options: ['Little Brother', 'Brother', 'Father', 'Uncle'] },
            { emoji: 'ğŸ‘§', correct: 'Little Sister', options: ['Little Sister', 'Sister', 'Mother', 'Aunt'] },
            { emoji: 'ğŸ‘´', correct: 'Grandfather', options: ['Grandfather', 'Uncle', 'Father', 'Brother'] },
            { emoji: 'ğŸ‘µ', correct: 'Grandmother', options: ['Grandmother', 'Aunt', 'Mother', 'Sister'] },
            { emoji: 'ğŸ‘¨', correct: 'Uncle', options: ['Uncle', 'Father', 'Grandfather', 'Brother'] },
            { emoji: 'ğŸ‘©', correct: 'Aunt', options: ['Aunt', 'Mother', 'Grandmother', 'Sister'] }
        ];

        // éŠæˆ²ç‹€æ…‹
        let currentQuestion = 0;
        let score = 0;
        let currentGameCorrect = 0;
        let currentGameTotal = 0;
        let shuffledQuestions = [];
        let gameStats = {
            totalAnswers: parseInt(localStorage.getItem('totalAnswers') || '0'),
            correctAnswers: parseInt(localStorage.getItem('correctAnswers') || '0'),
            highScore: parseInt(localStorage.getItem('highScore') || '0')
        };

        // é¡¯ç¤ºä¸åŒå€åŸŸ
        function showSection(sectionId) {
            const sections = ['mainMenu', 'teacherLogin', 'teacherArea', 'gameArea', 'gameEnd'];
            sections.forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(sectionId).classList.remove('hidden');
        }

        function startGame() {
            currentQuestion = 0;
            score = 0;
            currentGameCorrect = 0;
            currentGameTotal = 0;
            
            // éš¨æ©Ÿæ’åˆ—é¡Œç›®
            shuffledQuestions = [...questions];
            for (let i = shuffledQuestions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledQuestions[i], shuffledQuestions[j]] = [shuffledQuestions[j], shuffledQuestions[i]];
            }
            
            document.getElementById('score').textContent = score;
            document.getElementById('questionNumber').textContent = '1';
            document.getElementById('currentAccuracy').textContent = '0%';
            showSection('gameArea');
            showQuestion();
        }



        function showTeacherLogin() {
            showSection('teacherLogin');
            document.getElementById('password').value = '';
        }

        function checkPassword() {
            const password = document.getElementById('password').value;
            if (password === '000000') {
                showTeacherArea();
            } else {
                const feedback = document.createElement('div');
                feedback.className = 'text-red-600 mt-2 font-semibold';
                feedback.textContent = 'å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹é‡æ–°è¼¸å…¥ï¼';
                
                const existingFeedback = document.querySelector('#teacherLogin .text-red-600');
                if (existingFeedback) {
                    existingFeedback.remove();
                }
                
                document.querySelector('#teacherLogin .bg-white').appendChild(feedback);
                document.getElementById('password').value = '';
            }
        }

        function showTeacherArea() {
            showSection('teacherArea');
            updateTeacherStats();
        }

        function updateTeacherStats() {
            document.getElementById('totalAnswers').textContent = gameStats.totalAnswers;
            const accuracy = gameStats.totalAnswers > 0 ? Math.round((gameStats.correctAnswers / gameStats.totalAnswers) * 100) : 0;
            document.getElementById('accuracy').textContent = accuracy + '%';
            document.getElementById('highScore').textContent = gameStats.highScore;
        }

        function backToMenu() {
            showSection('mainMenu');
        }

        function showQuestion() {
            if (currentQuestion >= shuffledQuestions.length) {
                endGame();
                return;
            }

            const question = shuffledQuestions[currentQuestion];
            document.getElementById('questionEmoji').textContent = question.emoji;
            document.getElementById('questionText').textContent = 'Who is this?';
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            
            // éš±è—åé¥‹
            document.getElementById('feedback').classList.add('hidden');
            
            // ç”Ÿæˆé¸é … - éš¨æ©Ÿæ’åˆ—
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            // è¤‡è£½é¸é …é™£åˆ—ä¸¦éš¨æ©Ÿæ’åˆ—
            const shuffledOptions = [...question.options];
            for (let i = shuffledOptions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledOptions[i], shuffledOptions[j]] = [shuffledOptions[j], shuffledOptions[i]];
            }
            
            shuffledOptions.forEach(option => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'flex items-center gap-3';
                
                const button = document.createElement('button');
                button.className = 'flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-6 rounded-lg text-xl transform hover:scale-105 transition-all duration-200';
                button.textContent = option;
                button.onclick = () => selectAnswer(option);
                
                const pronounceBtn = document.createElement('button');
                pronounceBtn.className = 'bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-4 rounded-lg text-sm shadow-lg transform hover:scale-105 transition-all duration-200';
                pronounceBtn.innerHTML = 'ğŸ”Š';
                pronounceBtn.onclick = () => pronounceWord(option);
                
                optionDiv.appendChild(button);
                optionDiv.appendChild(pronounceBtn);
                optionsContainer.appendChild(optionDiv);
            });
        }

        function pronounceQuestion() {
            const question = shuffledQuestions[currentQuestion];
            const correctAnswer = question.correct;
            pronounceWord(correctAnswer);
        }

        function pronounceWord(word) {
            if ('speechSynthesis' in window) {
                // åœæ­¢ä»»ä½•æ­£åœ¨æ’­æ”¾çš„èªéŸ³
                speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                utterance.rate = 0.8;
                utterance.pitch = 1;
                utterance.volume = 1;
                
                speechSynthesis.speak(utterance);
            } else {
                // å¦‚æœç€è¦½å™¨ä¸æ”¯æ´èªéŸ³åˆæˆï¼Œé¡¯ç¤ºæç¤º
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
                notification.textContent = 'æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³åŠŸèƒ½';
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 3000);
            }
        }

        function selectAnswer(selectedAnswer) {
            const question = shuffledQuestions[currentQuestion];
            const isCorrect = selectedAnswer === question.correct;
            
            // æ›´æ–°çµ±è¨ˆ
            gameStats.totalAnswers++;
            currentGameTotal++;
            if (isCorrect) {
                gameStats.correctAnswers++;
                currentGameCorrect++;
                score += 10;
            }
            
            // æ›´æ–°ç•¶å‰éŠæˆ²ç­”å°ç‡
            const currentAccuracy = Math.round((currentGameCorrect / currentGameTotal) * 100);
            document.getElementById('currentAccuracy').textContent = currentAccuracy + '%';
            
            // ä¿å­˜çµ±è¨ˆåˆ°æœ¬åœ°å­˜å„²
            localStorage.setItem('totalAnswers', gameStats.totalAnswers.toString());
            localStorage.setItem('correctAnswers', gameStats.correctAnswers.toString());
            
            // é¡¯ç¤ºåé¥‹
            const feedback = document.getElementById('feedback');
            const feedbackText = document.getElementById('feedbackText');
            
            if (isCorrect) {
                feedback.className = 'mt-6 p-4 rounded-lg text-center bg-green-100 border-2 border-green-300';
                feedbackText.textContent = 'ğŸ‰ Correct! Well done!';
                feedbackText.className = 'text-xl font-bold text-green-700';
            } else {
                feedback.className = 'mt-6 p-4 rounded-lg text-center bg-red-100 border-2 border-red-300';
                feedbackText.textContent = `âŒ Wrong! The correct answer is: ${question.correct}`;
                feedbackText.className = 'text-xl font-bold text-red-700';
            }
            
            feedback.classList.remove('hidden');
            document.getElementById('score').textContent = score;
            
            // ç¦ç”¨æ‰€æœ‰é¸é …æŒ‰éˆ•
            const optionButtons = document.querySelectorAll('#options .flex-1');
            const pronounceButtons = document.querySelectorAll('#options .bg-green-500');
            optionButtons.forEach(button => {
                button.disabled = true;
                button.classList.add('opacity-50', 'cursor-not-allowed');
            });
            pronounceButtons.forEach(button => {
                button.disabled = true;
                button.classList.add('opacity-50', 'cursor-not-allowed');
            });
            
            // 2ç§’å¾Œé¡¯ç¤ºä¸‹ä¸€é¡Œ
            setTimeout(() => {
                currentQuestion++;
                showQuestion();
            }, 2000);
        }

        function endGame() {
            // æ›´æ–°æœ€é«˜åˆ†
            if (score > gameStats.highScore) {
                gameStats.highScore = score;
                localStorage.setItem('highScore', score.toString());
            }
            
            document.getElementById('finalScore').textContent = score + ' åˆ†';
            
            let message = '';
            if (score >= 180) {
                message = 'ğŸŒŸ Perfect! You are a family member expert!';
            } else if (score >= 150) {
                message = 'ğŸ‘ Great! You know family members well!';
            } else if (score >= 100) {
                message = 'ğŸ˜Š Good job! Keep it up!';
            } else {
                message = 'ğŸ’ª Keep trying! Practice makes perfect!';
            }
            
            document.getElementById('finalMessage').textContent = message;
            showSection('gameEnd');
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            showSection('mainMenu');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98f3a9e59045a3ab',t:'MTc2MDU3Njg5Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
