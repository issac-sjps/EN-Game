<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœˆä»½ç¿»ç‰Œå°å°ç¢°</title>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .game-container {
            display: flex;
            gap: 30px;
            align-items: flex-start;
            max-width: 1200px;
            width: 100%;
            justify-content: center;
        }

        .main-game {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .progress-panel {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
            width: 280px;
        }

        .progress-title {
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .progress-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            justify-items: center;
        }

        .progress-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            color: rgba(255,255,255,0.6);
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .progress-circle.completed {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            border-color: #4CAF50;
            color: white;
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(76, 175, 80, 0.4);
        }

        .game-header {
            text-align: center;
            color: white;
            margin-bottom: 20px;
        }

        .game-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .game-info {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .info-item {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 15px;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .card {
            width: 80px;
            height: 80px;
            position: relative;
            cursor: pointer;
            perspective: 1000px;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .card-front {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            color: #333;
            font-size: 2rem;
        }

        .card-back {
            background: linear-gradient(145deg, #667eea, #764ba2);
            color: white;
            transform: rotateY(180deg);
            font-size: 0.9rem;
            gap: 4px;
        }

        .card:hover {
            transform: translateY(-2px);
        }

        .card:hover .card-face {
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .card.matched .card-face {
            background: linear-gradient(145deg, #4CAF50, #45a049) !important;
            color: white !important;
            animation: matchSuccess 0.6s ease-in-out;
        }

        .card.bonus {
            pointer-events: none;
        }

        .card.bonus .card-inner {
            transform: rotateY(180deg);
        }

        .card.bonus .card-back {
            background: linear-gradient(145deg, #FFD700, #FFA500);
            color: #333;
        }

        .speak-btn {
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            margin-top: 2px;
        }

        .speak-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        .controls {
            margin-top: 20px;
            text-align: center;
        }

        .btn {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            margin: 0 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .btn.start-btn {
            background: linear-gradient(145deg, #FF6B6B, #FF5252);
            font-size: 1.3rem;
            padding: 15px 30px;
            animation: pulse-start 2s infinite;
        }

        .teacher-btn {
            background: linear-gradient(145deg, #9C27B0, #7B1FA2);
        }

        .btn-cancel {
            background: linear-gradient(145deg, #757575, #616161);
        }

        .btn-close {
            background: linear-gradient(145deg, #FF7043, #F4511E);
            margin-top: 20px;
        }

        .teacher-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .teacher-modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .teacher-content-large {
            max-width: 800px;
            max-height: 80%;
            overflow-y: auto;
        }

        .teacher-modal h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .teacher-modal input {
            width: 200px;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1rem;
            text-align: center;
            margin: 15px 0;
        }

        .teacher-modal input:focus {
            outline: none;
            border-color: #9C27B0;
        }

        .teacher-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .error-message {
            color: #f44336;
            font-size: 0.9rem;
            margin-top: 10px;
            min-height: 20px;
        }

        .teacher-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: #f0f0f0;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .tab-btn.active {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            color: white;
        }

        .tab-content {
            display: none;
            text-align: left;
        }

        .tab-content.active {
            display: block;
        }

        .vocabulary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .vocab-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .vocab-text {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .chinese-text {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
        }

        .english-text {
            font-size: 1rem;
            color: #666;
        }

        .vocab-speak {
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            font-size: 1rem;
        }

        .pronunciation-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .pronunciation-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .pronunciation-info {
            flex: 1;
        }

        .pronunciation-english {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
        }

        .pronunciation-phonetic {
            font-size: 1rem;
            color: #666;
            font-style: italic;
        }

        .tips-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .tip-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #2196F3;
        }

        .tip-section h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .tip-section ul {
            margin: 0;
            padding-left: 20px;
        }

        .tip-section li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        @keyframes pulse-start {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes matchSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .game-status {
            text-align: center;
            color: white;
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .game-over-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .game-over h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .final-score {
            font-size: 1.5rem;
            color: #4CAF50;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .timer-warning {
            color: #ff4444 !important;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.5; }
        }

        @media (max-width: 1000px) {
            .game-container {
                flex-direction: column;
                align-items: center;
            }
            
            .progress-panel {
                width: 100%;
                max-width: 500px;
                order: 2;
            }
        }

        @media (max-width: 600px) {
            .game-board {
                max-width: 350px;
            }
            
            .card {
                width: 60px;
                height: 60px;
            }
            
            .card-back {
                font-size: 0.7rem;
            }
            
            .game-title {
                font-size: 2rem;
            }
            
            .progress-panel {
                width: 100%;
                max-width: 350px;
            }
        }
    </style>
</head>
<body>
    <div class="game-header">
        <h1 class="game-title">ğŸ¯ æœˆä»½ç¿»ç‰Œå°å°ç¢°</h1>
        <div class="game-info">
            <div class="info-item">
                â° æ™‚é–“: <span id="timer">3:00</span>
            </div>
            <div class="info-item">
                ğŸ† åˆ†æ•¸: <span id="score">0</span>/100
            </div>
            <div class="info-item">
                ğŸ¯ é…å°: <span id="matches">0</span>/12
            </div>
        </div>
    </div>

    <div class="game-status" id="gameStatus">é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€ä¾†é–‹å§‹æŒ‘æˆ°ï¼</div>
    
    <div class="game-container">
        <div class="main-game">
            <div class="game-board" id="gameBoard"></div>
            
            <div class="controls">
                <button class="btn start-btn" id="startBtn" onclick="startGame()">ğŸš€ é–‹å§‹éŠæˆ²</button>
                <button class="btn" onclick="resetGame()" style="display: none;" id="resetBtn">ğŸ”„ é‡æ–°é–‹å§‹</button>
                <button class="btn teacher-btn" onclick="showTeacherLogin()">ğŸ‘©â€ğŸ« è€å¸«æ•™å­¸å€</button>
            </div>
        </div>
        
        <div class="progress-panel" id="progressPanel" style="display: none;">
            <div class="progress-title">ğŸ¯ é…å°é€²åº¦</div>
            <div class="progress-grid" id="progressGrid"></div>
        </div>
    </div>

    <div class="game-over" id="gameOver">
        <div class="game-over-content">
            <h2 id="gameOverTitle">éŠæˆ²çµæŸï¼</h2>
            <div class="final-score" id="finalScore"></div>
            <p id="gameOverMessage"></p>
            <button class="btn" onclick="startNewGame()">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>

    <!-- è€å¸«ç™»å…¥ä»‹é¢ -->
    <div class="teacher-modal" id="teacherLogin">
        <div class="teacher-modal-content">
            <h2>ğŸ‘©â€ğŸ« è€å¸«æ•™å­¸å€</h2>
            <p>è«‹è¼¸å…¥å¯†ç¢¼ä»¥æŸ¥çœ‹é¡Œåº«å…§å®¹</p>
            <input type="password" id="teacherPassword" placeholder="è«‹è¼¸å…¥å¯†ç¢¼" maxlength="6">
            <div class="teacher-buttons">
                <button class="btn" onclick="checkTeacherPassword()">ç¢ºèª</button>
                <button class="btn btn-cancel" onclick="hideTeacherLogin()">å–æ¶ˆ</button>
            </div>
            <div id="passwordError" class="error-message"></div>
        </div>
    </div>

    <!-- è€å¸«æ•™å­¸å…§å®¹ -->
    <div class="teacher-modal" id="teacherContent">
        <div class="teacher-modal-content teacher-content-large">
            <h2>ğŸ“š æœˆä»½å­¸ç¿’é¡Œåº«</h2>
            <div class="teacher-tabs">
                <button class="tab-btn active" onclick="showTab('vocabulary')">ğŸ“– è©å½™è¡¨</button>
                <button class="tab-btn" onclick="showTab('pronunciation')">ğŸ”Š ç™¼éŸ³ç·´ç¿’</button>
                <button class="tab-btn" onclick="showTab('tips')">ğŸ’¡ æ•™å­¸å»ºè­°</button>
            </div>
            
            <div id="vocabularyTab" class="tab-content active">
                <h3>ğŸ—“ï¸ åäºŒå€‹æœˆä»½å°ç…§è¡¨</h3>
                <div class="vocabulary-grid" id="vocabularyGrid"></div>
            </div>
            
            <div id="pronunciationTab" class="tab-content">
                <h3>ğŸµ ç™¼éŸ³ç·´ç¿’æŒ‡å—</h3>
                <div class="pronunciation-list" id="pronunciationList"></div>
            </div>
            
            <div id="tipsTab" class="tab-content">
                <h3>ğŸ¯ æ•™å­¸å»ºè­°èˆ‡æŠ€å·§</h3>
                <div class="tips-content">
                    <div class="tip-section">
                        <h4>ğŸ® éŠæˆ²æ•™å­¸æµç¨‹</h4>
                        <ul>
                            <li>å…ˆè®“å­¸ç”Ÿç†Ÿæ‚‰æ‰€æœ‰æœˆä»½çš„ä¸­è‹±æ–‡å°ç…§</li>
                            <li>ä½¿ç”¨ç™¼éŸ³åŠŸèƒ½è®“å­¸ç”Ÿè½æ­£ç¢ºç™¼éŸ³</li>
                            <li>å»ºè­°å…ˆç·´ç¿’3-5å€‹æœˆä»½ï¼Œå†é€æ­¥å¢åŠ </li>
                            <li>é¼“å‹µå­¸ç”Ÿå¤§è²è·Ÿè®€è‹±æ–‡æœˆä»½</li>
                        </ul>
                    </div>
                    <div class="tip-section">
                        <h4>ğŸ“ å»¶ä¼¸æ´»å‹•å»ºè­°</h4>
                        <ul>
                            <li>è®“å­¸ç”Ÿèªªå‡ºè‡ªå·±ç”Ÿæ—¥çš„æœˆä»½</li>
                            <li>ç·´ç¿’å­£ç¯€èˆ‡æœˆä»½çš„é—œè¯</li>
                            <li>å­¸ç¿’ç¯€æ—¥èˆ‡å°æ‡‰æœˆä»½</li>
                            <li>è£½ä½œæœˆä»½å°æ›¸æˆ–æµ·å ±</li>
                        </ul>
                    </div>
                    <div class="tip-section">
                        <h4>ğŸ† è©•é‡æ–¹å¼</h4>
                        <ul>
                            <li>è§€å¯Ÿå­¸ç”Ÿé…å°çš„æ­£ç¢ºç‡</li>
                            <li>è½å­¸ç”Ÿçš„ç™¼éŸ³æ˜¯å¦æ­£ç¢º</li>
                            <li>æ¸¬è©¦å­¸ç”Ÿèƒ½å¦å¿«é€Ÿåæ‡‰</li>
                            <li>è¨˜éŒ„å­¸ç”Ÿçš„é€²æ­¥æƒ…æ³</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-close" onclick="hideTeacherContent()">é—œé–‰</button>
        </div>
    </div>

    <script>
        const months = [
            { chinese: '1æœˆ', english: 'January' },
            { chinese: '2æœˆ', english: 'February' },
            { chinese: '3æœˆ', english: 'March' },
            { chinese: '4æœˆ', english: 'April' },
            { chinese: '5æœˆ', english: 'May' },
            { chinese: '6æœˆ', english: 'June' },
            { chinese: '7æœˆ', english: 'July' },
            { chinese: '8æœˆ', english: 'August' },
            { chinese: '9æœˆ', english: 'September' },
            { chinese: '10æœˆ', english: 'October' },
            { chinese: '11æœˆ', english: 'November' },
            { chinese: '12æœˆ', english: 'December' }
        ];

        let gameState = {
            cards: [],
            flippedCards: [],
            matchedPairs: 0,
            score: 0,
            timeLeft: 180,
            gameActive: false,
            gameStarted: false,
            timer: null,
            isProcessing: false
        };

        // èªéŸ³åˆæˆåŠŸèƒ½
        function speakEnglish(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                utterance.rate = 0.8;
                utterance.volume = 0.7;
                speechSynthesis.speak(utterance);
            }
        }

        function createGameBoard() {
            const board = document.getElementById('gameBoard');
            board.innerHTML = '';
            
            // å‰µå»ºå¡ç‰‡é™£åˆ—ï¼š12å°æœˆä»½ + 1å¼µåŠ åˆ†å¡
            let cards = [];
            
            // æ·»åŠ æœˆä»½é…å°å¡ç‰‡
            months.forEach((month, index) => {
                cards.push({
                    id: `chinese-${index}`,
                    text: month.chinese,
                    type: 'chinese',
                    matchId: index,
                    isBonus: false
                });
                cards.push({
                    id: `english-${index}`,
                    text: month.english,
                    type: 'english',
                    matchId: index,
                    isBonus: false
                });
            });
            
            // æ·»åŠ åŠ åˆ†å¡
            cards.push({
                id: 'bonus',
                text: 'ğŸ\n+4åˆ†',
                type: 'bonus',
                matchId: -1,
                isBonus: true
            });
            
            // æ´—ç‰Œ
            cards = shuffleArray(cards);
            gameState.cards = cards;
            
            // å‰µå»ºå¡ç‰‡å…ƒç´ 
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                if (card.isBonus) {
                    cardElement.classList.add('bonus');
                }
                cardElement.dataset.index = index;
                
                const cardInner = document.createElement('div');
                cardInner.className = 'card-inner';
                
                const cardFront = document.createElement('div');
                cardFront.className = 'card-face card-front';
                cardFront.textContent = '?';
                
                const cardBack = document.createElement('div');
                cardBack.className = 'card-face card-back';
                
                if (card.isBonus) {
                    cardBack.innerHTML = card.text;
                } else {
                    const englishText = card.type === 'english' ? card.text : months[card.matchId].english;
                    cardBack.innerHTML = `
                        <div>${card.text}</div>
                        <button class="speak-btn" onclick="event.stopPropagation(); speakEnglish('${englishText}')">ğŸ”Š</button>
                    `;
                }
                
                cardInner.appendChild(cardFront);
                cardInner.appendChild(cardBack);
                cardElement.appendChild(cardInner);
                
                if (!card.isBonus) {
                    cardElement.addEventListener('click', () => flipCard(index));
                }
                
                board.appendChild(cardElement);
            });
            
            // åˆå§‹åŒ–é€²åº¦åœ“åœˆ
            initializeProgressCircles();
        }

        function initializeProgressCircles() {
            const progressGrid = document.getElementById('progressGrid');
            progressGrid.innerHTML = '';
            
            // å‰µå»º12å€‹åœ“åœˆä»£è¡¨12å€‹æœˆä»½çš„é…å°
            for (let i = 0; i < 12; i++) {
                const circle = document.createElement('div');
                circle.className = 'progress-circle';
                circle.textContent = i + 1;
                circle.dataset.index = i;
                progressGrid.appendChild(circle);
            }
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function flipCard(index) {
            if (!gameState.gameActive || gameState.isProcessing || gameState.flippedCards.length >= 2) {
                return;
            }
            
            const card = gameState.cards[index];
            const cardElement = document.querySelector(`[data-index="${index}"]`);
            
            if (cardElement.classList.contains('flipped') || cardElement.classList.contains('matched')) {
                return;
            }
            
            // ç¬¬ä¸€æ¬¡ç¿»ç‰Œæ™‚é–‹å§‹è¨ˆæ™‚
            if (!gameState.gameStarted) {
                gameState.gameStarted = true;
                gameState.timer = setInterval(updateTimer, 1000);
                document.getElementById('gameStatus').textContent = 'éŠæˆ²é€²è¡Œä¸­...åŠ æ²¹ï¼';
            }
            
            // ç¿»ç‰Œ
            cardElement.classList.add('flipped');
            gameState.flippedCards.push({ index, card, element: cardElement });
            
            // æ’­æ”¾è‹±æ–‡ç™¼éŸ³
            if (card.type === 'english') {
                speakEnglish(card.text);
            }
            
            // æª¢æŸ¥é…å°
            if (gameState.flippedCards.length === 2) {
                gameState.isProcessing = true;
                setTimeout(checkMatch, 1000);
            }
        }

        function checkMatch() {
            const [first, second] = gameState.flippedCards;
            const isMatch = first.card.matchId === second.card.matchId && first.card.matchId !== -1;
            
            if (isMatch) {
                // é…å°æˆåŠŸ
                first.element.classList.add('matched');
                second.element.classList.add('matched');
                
                gameState.matchedPairs++;
                gameState.score += 8;
                updateScore();
                updateMatches();
                updateProgressCircles();
                
                // æ’­æ”¾é…å°æˆåŠŸçš„è‹±æ–‡ç™¼éŸ³
                const englishCard = first.card.type === 'english' ? first.card : second.card;
                speakEnglish(englishCard.text);
                
                // æª¢æŸ¥éŠæˆ²æ˜¯å¦å®Œæˆ
                if (gameState.matchedPairs === 12) {
                    setTimeout(() => endGame(true), 500);
                }
            } else {
                // é…å°å¤±æ•— - ç¿»å›æ­£é¢
                setTimeout(() => {
                    if (!first.element.classList.contains('matched')) {
                        first.element.classList.remove('flipped');
                    }
                    if (!second.element.classList.contains('matched')) {
                        second.element.classList.remove('flipped');
                    }
                }, 800);
            }
            
            // æ¸…ç©ºç¿»ç‰Œé™£åˆ—ä¸¦å…è¨±ç¹¼çºŒç¿»ç‰Œ
            gameState.flippedCards = [];
            gameState.isProcessing = false;
        }

        function updateProgressCircles() {
            // æ›´æ–°é€²åº¦åœ“åœˆï¼Œæ¯é…å°æˆåŠŸä¸€å°å°±é»äº®ä¸€å€‹åœ“åœˆ
            const completedPairs = gameState.matchedPairs;
            const circles = document.querySelectorAll('.progress-circle');
            
            circles.forEach((circle, index) => {
                if (index < completedPairs) {
                    circle.classList.add('completed');
                } else {
                    circle.classList.remove('completed');
                }
            });
        }



        function updateTimer() {
            const minutes = Math.floor(gameState.timeLeft / 60);
            const seconds = gameState.timeLeft % 60;
            const timerElement = document.getElementById('timer');
            timerElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            if (gameState.timeLeft <= 30) {
                timerElement.classList.add('timer-warning');
            }
            
            if (gameState.timeLeft <= 0) {
                endGame(false);
            } else {
                gameState.timeLeft--;
            }
        }

        function updateScore() {
            document.getElementById('score').textContent = gameState.score;
        }

        function updateMatches() {
            document.getElementById('matches').textContent = gameState.matchedPairs;
        }

        function startGame() {
            // é‡ç½®éŠæˆ²ç‹€æ…‹
            gameState = {
                cards: [],
                flippedCards: [],
                matchedPairs: 0,
                score: 4, // é è¨­4åˆ†ï¼ˆåŠ åˆ†å¡ï¼‰
                timeLeft: 180,
                gameActive: true,
                gameStarted: false,
                timer: null,
                isProcessing: false
            };
            
            // éš±è—éŠæˆ²çµæŸç•«é¢
            document.getElementById('gameOver').style.display = 'none';
            
            // é¡¯ç¤ºé€²åº¦é¢æ¿
            document.getElementById('progressPanel').style.display = 'block';
            
            // æ›´æ–°æŒ‰éˆ•é¡¯ç¤º
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('resetBtn').style.display = 'inline-block';
            
            // æ›´æ–°ç‹€æ…‹é¡¯ç¤º
            document.getElementById('gameStatus').textContent = 'ç¿»é–‹ç¬¬ä¸€å¼µå¡ç‰‡é–‹å§‹è¨ˆæ™‚ï¼';
            
            // é‡ç½®é¡¯ç¤º
            updateScore();
            updateMatches();
            document.getElementById('timer').classList.remove('timer-warning');
            
            // å‰µå»ºéŠæˆ²æ¿
            createGameBoard();
        }

        function resetGame() {
            // åœæ­¢è¨ˆæ™‚å™¨
            if (gameState.timer) {
                clearInterval(gameState.timer);
            }
            
            // éš±è—é€²åº¦é¢æ¿
            document.getElementById('progressPanel').style.display = 'none';
            
            // é‡ç½®æŒ‰éˆ•é¡¯ç¤º
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('resetBtn').style.display = 'none';
            
            // é‡ç½®ç‹€æ…‹
            gameState.gameActive = false;
            gameState.gameStarted = false;
            gameState.isProcessing = false;
            
            // æ›´æ–°ç‹€æ…‹é¡¯ç¤º
            document.getElementById('gameStatus').textContent = 'é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€ä¾†é–‹å§‹æŒ‘æˆ°ï¼';
            
            // æ¸…ç©ºéŠæˆ²æ¿
            document.getElementById('gameBoard').innerHTML = '';
            
            // é‡ç½®é¡¯ç¤º
            gameState.score = 4;
            gameState.matchedPairs = 0;
            gameState.timeLeft = 180;
            updateScore();
            updateMatches();
            document.getElementById('timer').textContent = '3:00';
            document.getElementById('timer').classList.remove('timer-warning');
        }

        function startNewGame() {
            resetGame();
            startGame();
        }

        function endGame(isWin) {
            gameState.gameActive = false;
            gameState.isProcessing = false;
            clearInterval(gameState.timer);
            
            const gameOverElement = document.getElementById('gameOver');
            const titleElement = document.getElementById('gameOverTitle');
            const scoreElement = document.getElementById('finalScore');
            const messageElement = document.getElementById('gameOverMessage');
            
            if (isWin) {
                titleElement.textContent = 'ğŸ‰ æ­å–œå®Œæˆï¼';
                titleElement.style.color = '#4CAF50';
                messageElement.textContent = 'ä½ æˆåŠŸé…å°äº†æ‰€æœ‰æœˆä»½ï¼è‹±èªå­¸ç¿’çœŸæ£’ï¼';
            } else {
                titleElement.textContent = 'â° æ™‚é–“åˆ°ï¼';
                titleElement.style.color = '#ff4444';
                messageElement.textContent = 'ç¹¼çºŒåŠªåŠ›å­¸ç¿’è‹±èªæœˆä»½å§ï¼';
            }
            
            scoreElement.textContent = `æœ€çµ‚åˆ†æ•¸: ${gameState.score}/100`;
            gameOverElement.style.display = 'flex';
        }

        // è€å¸«æ•™å­¸å€åŠŸèƒ½
        function showTeacherLogin() {
            document.getElementById('teacherLogin').style.display = 'flex';
            document.getElementById('teacherPassword').focus();
        }

        function hideTeacherLogin() {
            document.getElementById('teacherLogin').style.display = 'none';
            document.getElementById('teacherPassword').value = '';
            document.getElementById('passwordError').textContent = '';
        }

        function checkTeacherPassword() {
            const password = document.getElementById('teacherPassword').value;
            const errorElement = document.getElementById('passwordError');
            
            if (password === '000000') {
                hideTeacherLogin();
                showTeacherContent();
            } else {
                errorElement.textContent = 'å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹é‡æ–°è¼¸å…¥';
                document.getElementById('teacherPassword').value = '';
            }
        }

        function showTeacherContent() {
            document.getElementById('teacherContent').style.display = 'flex';
            initializeTeacherContent();
        }

        function hideTeacherContent() {
            document.getElementById('teacherContent').style.display = 'none';
        }

        function showTab(tabName) {
            // éš±è—æ‰€æœ‰æ¨™ç±¤å…§å®¹
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰æŒ‰éˆ•çš„activeç‹€æ…‹
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // é¡¯ç¤ºé¸ä¸­çš„æ¨™ç±¤
            document.getElementById(tabName + 'Tab').classList.add('active');
            event.target.classList.add('active');
        }

        function initializeTeacherContent() {
            // åˆå§‹åŒ–è©å½™è¡¨
            const vocabularyGrid = document.getElementById('vocabularyGrid');
            vocabularyGrid.innerHTML = '';
            
            months.forEach(month => {
                const vocabItem = document.createElement('div');
                vocabItem.className = 'vocab-item';
                vocabItem.innerHTML = `
                    <div class="vocab-text">
                        <div class="chinese-text">${month.chinese}</div>
                        <div class="english-text">${month.english}</div>
                    </div>
                    <button class="vocab-speak" onclick="speakEnglish('${month.english}')">ğŸ”Š</button>
                `;
                vocabularyGrid.appendChild(vocabItem);
            });
            
            // åˆå§‹åŒ–ç™¼éŸ³ç·´ç¿’
            const pronunciationList = document.getElementById('pronunciationList');
            pronunciationList.innerHTML = '';
            
            const phoneticData = [
                { english: 'January', phonetic: '/ËˆdÊ’Ã¦njuËŒÉ›ri/' },
                { english: 'February', phonetic: '/ËˆfÉ›bruËŒÉ›ri/' },
                { english: 'March', phonetic: '/mÉ‘rtÊƒ/' },
                { english: 'April', phonetic: '/ËˆeÉªprÉ™l/' },
                { english: 'May', phonetic: '/meÉª/' },
                { english: 'June', phonetic: '/dÊ’un/' },
                { english: 'July', phonetic: '/dÊ’uËˆlaÉª/' },
                { english: 'August', phonetic: '/ËˆÉ”gÉ™st/' },
                { english: 'September', phonetic: '/sÉ›pËˆtÉ›mbÉ™r/' },
                { english: 'October', phonetic: '/É‘kËˆtoÊŠbÉ™r/' },
                { english: 'November', phonetic: '/noÊŠËˆvÉ›mbÉ™r/' },
                { english: 'December', phonetic: '/dÉªËˆsÉ›mbÉ™r/' }
            ];
            
            phoneticData.forEach(item => {
                const pronunciationItem = document.createElement('div');
                pronunciationItem.className = 'pronunciation-item';
                pronunciationItem.innerHTML = `
                    <div class="pronunciation-info">
                        <div class="pronunciation-english">${item.english}</div>
                        <div class="pronunciation-phonetic">${item.phonetic}</div>
                    </div>
                    <button class="vocab-speak" onclick="speakEnglish('${item.english}')">ğŸ”Š</button>
                `;
                pronunciationList.appendChild(pronunciationItem);
            });
        }

        // å¯†ç¢¼è¼¸å…¥æ¡†æŒ‰Enteréµç¢ºèª
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter' && document.getElementById('teacherLogin').style.display === 'flex') {
                checkTeacherPassword();
            }
        });

        // åˆå§‹åŒ–éŠæˆ²
        window.addEventListener('load', () => {
            updateScore();
            updateMatches();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98eb830e152b8412',t:'MTc2MDQ5MTQxNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
