<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±æ–‡å–®å­—æŒ‘æˆ°è³½</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        #game-container {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            width: 90%;
            max-width: 500px;
        }

        h1 { color: #2d3748; margin-bottom: 0.5rem; }
        .hint { color: #4a5568; font-size: 1.2rem; margin-bottom: 1.5rem; font-weight: bold; }

        .word-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 2rem;
            min-height: 50px;
        }

        .letter-slot {
            width: 40px;
            height: 45px;
            border-bottom: 3px solid #cbd5e0;
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #3182ce;
        }

        .letters-bank {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 1.5rem;
        }

        .letter-btn {
            background-color: #edf2f7;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .letter-btn:hover { background-color: #e2e8f0; transform: translateY(-2px); }
        .letter-btn:disabled { opacity: 0.3; cursor: not-allowed; }

        .controls { display: flex; gap: 10px; justify-content: center; }

        button.main-btn {
            padding: 10px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: bold;
        }

        .clear-btn { background-color: #feb2b2; color: #9b2c2c; }
        .next-btn { background-color: #9ae6b4; color: #22543d; display: none; }

        .message { margin-top: 1rem; font-weight: bold; height: 20px; }
        .score { color: #718096; margin-top: 1rem; }
    </style>
</head>
<body>

<div id="game-container">
    <h1>æ‹¼å­—å¤§æŒ‘æˆ°</h1>
    <div class="score">é€²åº¦: <span id="current-idx">1</span> / <span id="total-count">3</span></div>
    
    <div class="hint" id="hint-text">è®€å–ä¸­...</div>
    
    <div class="word-display" id="word-display"></div>
    
    <div class="letters-bank" id="letters-bank"></div>

    <div class="controls">
        <button class="main-btn clear-btn" onclick="resetWord()">æ¸…é™¤é‡ä¾†ä»£</button>
        <button class="main-btn next-btn" id="next-btn" onclick="nextQuestion()">ä¸‹ä¸€å€‹å–®å­—</button>
    </div>

    <div class="message" id="message"></div>
</div>

<script>
    const vocabulary = [
        { word: 'science', hint: 'ç§‘å­¸' },
        { word: 'subject', hint: 'ç§‘ç›® / ä¸»é¡Œ' },
        { word: 'favorite', hint: 'æœ€å–œæ„›çš„' }
    ];

    let currentIndex = 0;
    let currentInput = "";

    const hintEl = document.getElementById('hint-text');
    const displayEl = document.getElementById('word-display');
    const bankEl = document.getElementById('letters-bank');
    const messageEl = document.getElementById('message');
    const nextBtn = document.getElementById('next-btn');
    const currentIdxEl = document.getElementById('current-idx');
    const totalCountEl = document.getElementById('total-count');

    function initGame() {
        totalCountEl.innerText = vocabulary.length;
        loadQuestion();
    }

    function loadQuestion() {
        const item = vocabulary[currentIndex];
        hintEl.innerText = `ä¸­æ–‡æ„æ€ï¼š${item.hint}`;
        currentInput = "";
        messageEl.innerText = "";
        messageEl.style.color = "black";
        nextBtn.style.display = "none";
        currentIdxEl.innerText = currentIndex + 1;

        // å»ºç«‹ç©ºæ ¼
        displayEl.innerHTML = "";
        for (let i = 0; i < item.word.length; i++) {
            const slot = document.createElement('div');
            slot.className = 'letter-slot';
            displayEl.appendChild(slot);
        }

        // å»ºç«‹æ‰“äº‚çš„å­—æ¯æŒ‰éˆ•
        const shuffled = item.word.split('').sort(() => Math.random() - 0.5);
        bankEl.innerHTML = "";
        shuffled.forEach((char, index) => {
            const btn = document.createElement('button');
            btn.className = 'letter-btn';
            btn.innerText = char;
            btn.onclick = () => selectLetter(char, btn);
            bankEl.appendChild(btn);
        });
    }

    function selectLetter(char, btn) {
        const item = vocabulary[currentIndex];
        if (currentInput.length < item.word.length) {
            currentInput += char;
            btn.disabled = true;
            updateDisplay();
            
            if (currentInput.length === item.word.length) {
                checkAnswer();
            }
        }
    }

    function updateDisplay() {
        const slots = document.querySelectorAll('.letter-slot');
        for (let i = 0; i < currentInput.length; i++) {
            slots[i].innerText = currentInput[i];
        }
    }

    function resetWord() {
        currentInput = "";
        const slots = document.querySelectorAll('.letter-slot');
        slots.forEach(slot => slot.innerText = "");
        const btns = document.querySelectorAll('.letter-btn');
        btns.forEach(btn => btn.disabled = false);
        messageEl.innerText = "";
    }

    function checkAnswer() {
        const correctWord = vocabulary[currentIndex].word;
        if (currentInput === correctWord) {
            messageEl.innerText = "å¤ªæ£’äº†ï¼ç­”å°äº† âœ¨";
            messageEl.style.color = "#38a169";
            nextBtn.style.display = "block";
        } else {
            messageEl.innerText = "å“å‘€ï¼Œæ‹¼éŒ¯å›‰ï¼å†è©¦ä¸€æ¬¡";
            messageEl.style.color = "#e53e3e";
            setTimeout(resetWord, 1000);
        }
    }

    function nextQuestion() {
        currentIndex++;
        if (currentIndex < vocabulary.length) {
            loadQuestion();
        } else {
            document.getElementById('game-container').innerHTML = `
                <h1>ğŸ‰ æ­å–œå®Œæˆï¼</h1>
                <p>ä½ å·²ç¶“å­¸æœƒäº†é€™æ¬¡æ‰€æœ‰çš„å–®å­—ã€‚</p>
                <button class="main-btn" onclick="location.reload()" style="background:#3182ce; color:white;">é‡æ–°æŒ‘æˆ°</button>
            `;
        }
    }

    initGame();
</script>

</body>
</html>
